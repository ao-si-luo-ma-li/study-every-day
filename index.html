<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimunm=1.0,maximum=1.0,user-scalable=no" >
  <title>Document</title>
</head>
<style>
  * {
    margin: 0;
    padding: 0;
  }
  .p {
    font-size: 2.4rem;
    padding: 2rem;
    border: 1px solid;
    margin: 2rem;
  }
</style>
<body>
  <div class="p">测试 DPR，测试 DPR，测试 DPR， 测试 DPR， 测试 DPR， 测试 DPR， 测试 DPR， 测试 DPR， 测试 DPR 测试 DPR 测试 DPR 测试 DPR 测试 DPR，测试 DPR，测试 DPR ，测试 DPR， 测试 DPR， 测试 DPR</div>
</body>
<script>
  window.onload = function (params) {

    // function debunce(fn, delay) {
    //   let timer1 = null;
    //   return function (params) {
    //     var self = this;
    //     clearTimeout(timer1);
    //     console.log('+++++++',timer1)
    //     timer1 = setTimeout(fn.bind(self), delay);
    //   }
    // }

    function setRem() {
      var doc = document.documentElement;
      var docWidth = doc.getBoundingClientRect().width * window.devicePixelRatio;
      var root = docWidth / 75;
      doc.style.fontSize = root + 'px';

      var view = document.querySelector('meta[name=viewport]');
      var scale = (1 / window.devicePixelRatio).toFixed(2);
      console.log('docWidth', docWidth)
      view.setAttribute('content', `width=${docWidth},initial-scale=${scale},minimunm=${scale},maximum=${scale},user-scalable=no`)
    }
    setRem();
    // window.addEventListener('resize', debunce(setRem, 300));

    new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve(11);
      }, 100);
    })
    .then(data => {
      console.log('then1=>', data)
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          resolve(999)
        }, 100);
      }).then(data => {
        console.log('inthen1 => ', data)
        return 100
      })
    })
    .then(data => {
      console.log('then2=>', data)
    })

    async function request(params) {
      const data1 = await new Promise((resolve, reject) =>{
        setTimeout(() => {
         resolve(998)
        }, 100);
      })
      .then(data => {
        console.log('async in then 1', data);
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('oop')
          }, 100);
        })
      })
      console.log('data1', data1)
    }
    request();
  }
</script>
</html>